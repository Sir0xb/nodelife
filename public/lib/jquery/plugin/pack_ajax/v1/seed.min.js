!function(){"use strict";var a=window,b=function(){},c=a.log||b,d=(a._17M||{}).doExternal||b,e=function(b){var e,f;return b.ajaxSetup({cache:!1,timeout:25e3}),e={},function(g,h,i,j){var k,l,m;if(i=(i||"GET").toUpperCase(),k=b.extend({url:g,data:h,type:i,seq:"POST"===i,dataType:"json"},j),k.freeze_ms){if(l=(new Date).getTime(),m=g+"freeze_ms",l-e[m]<k.freeze_ms)return console.log("两次请求间隔太短\n url : %s \n opts: %j ",g,k),void 0;e[m]=l}if(k.seq){if("loading"===e[g])return console.log("请等待相同url的上一个请求结束\n url : %s \n opts: %j ",g,k),void 0;e[g]="loading"}return k.loading&&!f&&(f||(0===b(".wait_loading").length&&b("body").append('<div class="loading wait_loading"><span class="icon"></span></div>'),f=b(".wait_loading")),f[0].style.display="block"),b.ajax(k).done(function(b){var e="success"in b?b.success:"success"===b.result;return e||(c({logs:["ajax 返回逻辑出错 调用参数 %j, 出错信息 %j",k,arguments],op:"ajax"},"error"),900!==+b.errorCode)?void 0:(d("redirectLogin","")||(a.location.href="/"),void 0)}).fail(function(b,d,e){c({logs:["ajax 物理出错 调用参数 %j, 出错信息 %j",k,arguments],op:"ajax"},"error"),"timeout"===e&&a.alert("服务器正忙，请稍后重试!")}).always(function(){k.seq&&(e[g]=null),k.loading&&(f[0].style.display="none")})}};"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):a.io=e(a.jQuery)}();